## Docker Tutorial ##
This is a simple tutorial to get you started with Docker. 
It is a step-by-step guide to  understand the basics of Docker and how to use it on Linux.

### What is Docker? ###
Docker is a platform for developers and sysadmins to develop, deploy, and run applications with *containers*.
The use of Linux containers to deploy applications is called containerization.
*We use Linux since it's lightweight, has a low overhead, and it's natively supported by Windows. 
### What are *containers*? ###
Containers are a way to package software in a format that can run isolated on a shared operating system.
This means:
- Containers are lightweight
- Containers share the OS kernel, but run in isolation
- Containers run the same, regardless of the environment
- Containers do not need a physical portion of the hardware
### Virtual Machines vs Containers ###
Containers and Virtual Machines (VMs) both offer virtualization, but with different scopes.
Containers virtualize the OS for multiple workloads on a single OS instance.
VMs virtualize hardware to run multiple separate OS instances.
### Docker Architecture ###
Docker uses a client-server architecture. 
The Server is a type of long-running program called a daemon process (the `dockerd` command) and it's usually called "Docker Engine".
The Docker client talks to the Docker Engine, which does the heavy lifting of building, running, and distributing your Docker containers.

---
## Docker Installation ##
Not as simple as "apt install docker" but not too complicated either.
# Update your existing list of packages
```bash
sudo apt-get update
```

# Install prerequisite packages
```bash
sudo apt-get install apt-transport-https ca-certificates curl software-properties-common
```

# Add Dockerâ€™s official GPG key
```bash
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
```

# Add Docker's official repository
```bash
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
```

# Update the package database with the Docker packages from the newly added repo
```bash
sudo apt-get update
```

# Install Docker
```bash
sudo apt-get install docker-ce
```

# Check if Docker is installed correctly
```bash
sudo docker version
```

## Creating a Container ##
First we must create a "Dockerfile" which is a text document that contains all the commands a user could call on the command line to assemble an image.

```Dockerfile
# Lightweight node
FROM node:alpine
# Copy "." everything in the current folder into "/app"
COPY . /app
# Set working directory to /app
WORKDIR /app
# Execute command "node helloDocker"
CMD node helloDocker.js
```

Then we create a simple "helloDocker.js" file:
```javascript
console.log("Hello Docker!");
```

Now we can build the image:
```bash
sudo docker build -t hello-docker:<tag> .
```

To check the docker images:
```bash
sudo docker image ls
# or
sudo docker images
```
# Run the image
```bash
sudo docker run hello-docker:<tag>
# or interactively
sudo docker run -it hello-docker:<tag>
```

# Check the running containers
```bash
sudo docker ps
```

# Push the image to Docker Hub
```bash
sudo docker login
sudo docker tag hello-docker <your-docker-hub-username>/hello-docker:<tag>
sudo docker push <your-docker-hub-username>/hello-docker:<tag>
```

# Pull the image from Docker Hub
```bash
sudo docker pull <your-docker-hub-username>/hello-docker
```

# Stop the container
```bash
sudo docker stop <container-id>
```

# Remove the container
```bash
sudo docker rm <container-id>
```

# Remove the image
```bash
sudo docker rmi <image-id>
```

## Docker Volumes ##
Docker volumes are used to persist data generated by and used by Docker containers.
```bash
sudo docker volume create my-vol
sudo docker run -d -v my-vol:/app --name my-container hello-docker:<tag>
```
This will create a volume named "my-vol" and mount it to the "/app" directory in the container.
Multiple containers can use the same volume, and the data will persist even if the container is removed.

## Docker Compose ##
Docker Compose is a tool for defining and running multi-container Docker applications.
```yaml
version: '3'
services:
  web:
    build: .
    ports:
      - "5000:5000"
    volumes:
      - .:/code
  redis:
    image: "redis:alpine"
```
This is a simple "docker-compose.yml" file that defines two services: "web" and "redis".
The "web" service uses the current directory as the build context and exposes port 5000.
The "redis" service uses the "redis:alpine" image.

To start a specific services:
```bash
sudo docker-compose up <service-name>
```

To stop a specific service:
```bash
sudo docker-compose down <service-name>
```
